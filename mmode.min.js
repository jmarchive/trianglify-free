var resbox=document.getElementById("result"),pw=document.getElementById("pw");document.getElementById("seed").value=(new Date).getTime();var variance=.75,cellsize=75,pattern=trianglify({width:document.getElementById("width").value,height:document.getElementById("height").value,cellSize:cellsize,variance:variance,seed:document.getElementById("seed").value,xColors:"random",yColors:"match",colorFunction:trianglify.colorFunctions.interpolateLinear(.5),strokeWidth:0,points:null});function update(){pattern=trianglify({width:document.getElementById("width").value,height:document.getElementById("height").value,cellSize:cellsize,variance:variance,seed:document.getElementById("seed").value,xColors:"random",yColors:"match",colorFunction:trianglify.colorFunctions.interpolateLinear(.5),strokeWidth:0,points:null}),resbox.appendChild(pattern.toCanvas()),resbox.removeChild(resbox.childNodes[0])}function png(){var e=document.createElement("a");e.download="trianglify-free",e.href=resbox.childNodes[0].toDataURL("image/png"),document.body.appendChild(e),e.click(),e.remove()}function svg(e){var t=document.createElement("svg");t.hidden=!0,pattern.toSVG(t);var n=document.createElement("a");n.download="trianglify-free.svg";const a="data:text/plain;charset=utf-8,<svg xmlns='http://www.w3.org/2000/svg'";n.href=e?a+" width='"+document.getElementById("width").value+"' height='"+document.getElementById("height").value+"'>"+t.innerHTML+"</svg>":a+">"+t.innerHTML+"</svg>",document.body.appendChild(n),n.click(),n.remove()}function varange(){variance=document.getElementById("variance").value,document.getElementById("variance-text").value=document.getElementById("variance").value,update()}function vatext(){document.getElementById("variance-text").value>2?document.getElementById("variance").value=2:0==document.getElementById("variance-text").value?document.getElementById("variance").value=0:document.getElementById("variance").value=document.getElementById("variance-text").value,variance=document.getElementById("variance-text").value,update()}function seedupdate(){document.getElementById("seed").value=(new Date).getTime(),update()}function csupdate(){var e=document.getElementById("cellsize").value,t=e;if(-1==e.search(/[^-][^0-9]/)){if(Math.abs(e)<=20)for(t=prompt("WARNING: Cell size with small absolute value (-20~20) will probably cause a crash, and the generated photo will have almost no triangle visible. Do you really want this?\r\nPlease enter the value you want below.");0==t||null==t;)t=prompt("Cell size can't be set to 0 or empty.\r\nEnter a new value below.");var n=document.getElementById("negatip");n.hidden=!(t<0),cellsize=t,document.getElementById("cellsize").value=t,update()}else document.getElementById("cellsize").value=cellsize}function fixnegacs(){document.getElementById("cellsize").value=-document.getElementById("cellsize").value,csupdate()}function pwopen(e){pw.hidden=!1}function drag(){var e,t,n=document.getElementById("drag"),a=document.getElementById("toolbox"),l=!1,d=parseInt(window.getComputedStyle(a).left),o=parseInt(window.getComputedStyle(a).top);n.addEventListener("mousedown",(function(n){l=!0,e=n.clientX,t=n.clientY}),!1),document.addEventListener("mousemove",(function(n){l&&(a.style.left=d+n.clientX-e+"px",a.style.top=o+n.clientY-t+"px")})),document.addEventListener("mouseup",(function(e){l=!1,d=parseInt(window.getComputedStyle(a).left),o=parseInt(window.getComputedStyle(a).top)}),!1)}resbox.appendChild(pattern.toCanvas()),drag();