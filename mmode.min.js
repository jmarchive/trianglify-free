var resbox=document.getElementById("result"),pw=document.getElementById("pw");document.getElementById("seed").value=(new Date).getTime();var cellsize=75,pattern=trianglify({width:document.getElementById("width").value,height:document.getElementById("height").value,cellSize:cellsize,variance:document.getElementById("variance").value,seed:document.getElementById("seed").value,xColors:"random",yColors:"match",colorFunction:trianglify.colorFunctions.interpolateLinear(.5),strokeWidth:0,points:null});function update(){pattern=trianglify({width:document.getElementById("width").value,height:document.getElementById("height").value,cellSize:cellsize,variance:document.getElementById("variance").value,seed:document.getElementById("seed").value,xColors:"random",yColors:"match",colorFunction:trianglify.colorFunctions.interpolateLinear(.5),strokeWidth:0,points:null}),resbox.appendChild(pattern.toCanvas()),resbox.removeChild(resbox.childNodes[0])}function png(){var e=new Date,t=document.createElement("a");t.download="trianglify-free-"+e.getFullYear()+"."+e.getMonth()+"."+e.getDay()+"_"+e.getHours()+e.getMinutes()+e.getSeconds()+".png",t.href=resbox.childNodes[0].toDataURL("image/png"),document.body.appendChild(t),t.click(),t.remove()}function svg(e){var t=document.createElement("svg");t.hidden=!0,pattern.toSVG(t);var n=document.createElement("a");const l="data:text/plain;charset=utf-8,<svg xmlns='http://www.w3.org/2000/svg'";var o=new Date,a=o.getFullYear()+"."+o.getMonth()+"."+o.getDay()+"_"+o.getHours()+o.getMinutes()+o.getSeconds();e?(n.download="trianglify-free-res-"+a+".svg",n.href=l+" width='"+document.getElementById("width").value+"' height='"+document.getElementById("height").value+"'>"+t.innerHTML+"</svg>"):(n.download="trianglify-free-nores-"+a+".svg",n.href=l+">"+t.innerHTML+"</svg>"),document.body.appendChild(n),n.click(),n.remove()}function vaupdate(){update()}function seedupdate(){document.getElementById("seed").value=(new Date).getTime(),update()}function csupdate(){var e=document.getElementById("cellsize").value,t=e;if(Math.abs(e)<=20)for(t=prompt("WARNING: Cell size with small absolute value (-20~20) will probably cause a crash, and the generated photo will have almost no triangle visible. Do you really want this?\r\nPlease enter the value you want below.");0==t||null==t;)t=prompt("Cell size can't be set to 0 or empty.\r\nEnter a new value below.");var n=document.getElementById("negatip");n.hidden=!(t<0),cellsize=t,document.getElementById("cellsize").value=t,update()}function fixnegacs(){document.getElementById("cellsize").value=-document.getElementById("cellsize").value,csupdate()}function drag(){var e,t,n=document.getElementById("drag"),l=document.getElementById("mainwindow"),o=!1,a=parseInt(getComputedStyle(l).left),d=parseInt(getComputedStyle(l).top);n.addEventListener("mousedown",(function(l){o=!0,e=l.clientX,t=l.clientY,n.style.cursor="grabbing"}),!1),document.addEventListener("mousemove",(function(n){o&&(l.style.left=a+n.clientX-e+"px",l.style.top=d+n.clientY-t+"px")})),document.addEventListener("mouseup",(function(){o=!1,n.style.cursor="grab",a=parseInt(getComputedStyle(l).left),d=parseInt(getComputedStyle(l).top)}),!1)}function mouse(e){var t,n=document.getElementById(e),l=!1,o=parseInt(n.value);n.addEventListener("mousedown",(function(e){l=!0,t=e.clientY}),!1),document.addEventListener("mousemove",(function(e){l&&(t-e.clientY==10?(o++,n.value=o,t=e.clientY):e.clientY-t==10&&(o--,n.value=o,t=e.clientY))})),document.addEventListener("mouseup",(function(e){l&&(l=!1,n.oninput())}),!1)}resbox.appendChild(pattern.toCanvas()),drag();